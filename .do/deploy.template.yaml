spec:
  name: SAML Jackson
  services:
    - name: web
      build_command: npm run build
      run_command: npm run start
      git:
        branch: release
        repo_clone_url: https://github.com/boxyhq/jackson.git
      envs:
        # Jackson settings
        - key: EXTERNAL_URL
        - key: SAML_AUDIENCE
          value: 'https://saml.boxyhq.com'
        - key: JACKSON_API_KEYS
          type: SECRET
        - key: IDP_ENABLED
        - key: PRE_LOADED_CONFIG
        - key: CLIENT_SECRET_VERIFIER

        # Database settings
        - key: DB_ENGINE
          value: 'sql'
        - key: DB_URL
          value: 'postgres://postgres:postgres@localhost:5432/postgres'
        - key: DB_TYPE
          value: 'postgres'
        - key: DB_TTL
          value: 300
        - key: DB_CLEANUP_LIMIT
          value: 1000
        - key: DB_PAGE_LIMIT
          value: 50
        - key: DB_ENCRYPTION_KEY
          type: SECRET

        # Admin UI settings
        - key: SMTP_HOST
        - key: SMTP_PORT
        - key: SMTP_USER
        - key: SMTP_PASSWORD
          type: SECRET
        - key: SMTP_FROM
        - key: NEXTAUTH_URL
        - key: NEXTAUTH_SECRET
          type: SECRET
        - key: NEXTAUTH_ACL

        # OpenTelemetry
        - key: OTEL_EXPORTER_OTLP_METRICS_ENDPOINT
        - key: OTEL_EXPORTER_OTLP_HEADERS

        - key: OPENID_JWS_ALG

        # JWT signing keys
        - key: OPENID_RSA_PRIVATE_KEY
          type: SECRET
        - key: OPENID_RSA_PUBLIC_KEY
          type: SECRET
